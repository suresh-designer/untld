{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///Users/suresh/Documents/Git/untld/app/api/metadata/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport * as cheerio from 'cheerio';\n\nexport async function GET(request: Request) {\n    const { searchParams } = new URL(request.url);\n    const url = searchParams.get('url');\n\n    if (!url) {\n        return NextResponse.json({ error: 'URL is required' }, { status: 400 });\n    }\n\n    try {\n        const response = await fetch(url, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            },\n            next: { revalidate: 3600 } // Cache for 1 hour\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch URL');\n        }\n\n        const html = await response.text();\n        const $ = cheerio.load(html);\n\n        const title = $('title').text() || $('meta[property=\"og:title\"]').attr('content') || url;\n        const description = $('meta[name=\"description\"]').attr('content') || $('meta[property=\"og:description\"]').attr('content') || '';\n\n        // Favicon logic\n        const domain = new URL(url).hostname;\n        const favicon = `https://www.google.com/s2/favicons?domain=${domain}&sz=64`;\n\n        return NextResponse.json({\n            title: title.trim(),\n            description: description.trim(),\n            favicon,\n            url\n        });\n    } catch (error) {\n        console.error('Metadata fetch error:', error);\n        // Return partial data if possible\n        try {\n            const domain = new URL(url).hostname;\n            return NextResponse.json({\n                title: domain,\n                description: '',\n                favicon: `https://www.google.com/s2/favicons?domain=${domain}&sz=64`,\n                url\n            });\n        } catch (e) {\n            return NextResponse.json({ error: 'Invalid URL' }, { status: 400 });\n        }\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,eAAe,IAAI,OAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,MAAM,aAAa,GAAG,CAAC;IAE7B,IAAI,CAAC,KAAK;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACzE;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,SAAS;gBACL,cAAc;YAClB;YACA,MAAM;gBAAE,YAAY;YAAK,EAAE,mBAAmB;QAClD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,MAAM,IAAI,iKAAY,CAAC;QAEvB,MAAM,QAAQ,EAAE,SAAS,IAAI,MAAM,EAAE,6BAA6B,IAAI,CAAC,cAAc;QACrF,MAAM,cAAc,EAAE,4BAA4B,IAAI,CAAC,cAAc,EAAE,mCAAmC,IAAI,CAAC,cAAc;QAE7H,gBAAgB;QAChB,MAAM,SAAS,IAAI,IAAI,KAAK,QAAQ;QACpC,MAAM,UAAU,CAAC,0CAA0C,EAAE,OAAO,MAAM,CAAC;QAE3E,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,OAAO,MAAM,IAAI;YACjB,aAAa,YAAY,IAAI;YAC7B;YACA;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,kCAAkC;QAClC,IAAI;YACA,MAAM,SAAS,IAAI,IAAI,KAAK,QAAQ;YACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACrB,OAAO;gBACP,aAAa;gBACb,SAAS,CAAC,0CAA0C,EAAE,OAAO,MAAM,CAAC;gBACpE;YACJ;QACJ,EAAE,OAAO,GAAG;YACR,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAc,GAAG;gBAAE,QAAQ;YAAI;QACrE;IACJ;AACJ"}}]
}